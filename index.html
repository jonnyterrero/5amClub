            renderDashboard(c) {
                const tasks = this.data.tasks.filter(t => !t.completed && !t.day);
                const activeC = this.data.courses.filter(x => x.status === 'In Progress');
                
                // Calculate Global Progress
                let totalGoals = 0, completedGoals = 0;
                this.data.courses.forEach(co => {
                    if(co.goals) {
                        totalGoals += co.goals.length;
                        completedGoals += co.goals.filter(g => g.completed).length;
                    }
                });
                const globalProgress = totalGoals > 0 ? Math.round((completedGoals / totalGoals) * 100) : 0;

                // Collect all active goals for display
                const allActiveGoals = [];
                this.data.courses.forEach(c => {
                    if(c.goals) c.goals.forEach(g => {
                        if(!g.completed) allActiveGoals.push({ courseTitle: c.title, text: g.text });
                    });
                });
                const recentGoals = allActiveGoals.slice(0, 5); // Show top 5

                c.innerHTML = `
                    <h2 class="text-3xl font-bold mb-6 dark:text-white">Dashboard</h2>
                    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                        <div class="col-span-2 space-y-6">
                            <div class="bg-white dark:bg-darkSurface p-6 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm">
                                <div class="flex justify-between mb-4"><h3 class="font-bold dark:text-white">Inbox</h3><button onclick="app.addTask(null)" class="text-xs bg-primary text-white px-2 py-1 rounded">+ Task</button></div>
                                <div id="dash-tasks" class="space-y-2">${tasks.length ? tasks.map(t => this.htmlTaskItem(t)).join('') : '<p class="text-gray-400 text-sm">No inbox tasks.</p>'}</div>
                            </div>
                            
                            <div class="bg-white dark:bg-darkSurface p-6 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm">
                                <h3 class="font-bold dark:text-white mb-4">Active Goals Overview</h3>
                                <ul class="space-y-2 text-sm">
                                    ${recentGoals.length ? recentGoals.map(g => `
                                        <li class="flex justify-between items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800">
                                            <span class="dark:text-gray-300">${g.text}</span>
                                            <span class="text-xs text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded">${g.courseTitle}</span>
                                        </li>
                                    `).join('') : '<p class="text-gray-400 text-sm">No active goals.</p>'}
                                </ul>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div class="bg-white dark:bg-darkSurface p-6 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm text-center">
                                <h3 class="font-bold dark:text-white mb-4">Global Progress</h3>
                                <div class="relative w-40 h-40 mx-auto">
                                    <canvas id="dashChart"></canvas>
                                    <div class="absolute inset-0 flex items-center justify-center flex-col">
                                        <span class="text-3xl font-bold dark:text-white">${globalProgress}%</span>
                                        <span class="text-xs text-gray-500">Completed</span>
                                    </div>
                                </div>
                                <div class="mt-4 text-sm text-gray-500">
                                    ${completedGoals} / ${totalGoals} Goals
                                </div>
                            </div>
                        </div>
                    </div>
                    <h3 class="text-xl font-bold mt-8 mb-4 dark:text-white">Active Courses</h3>
                    <div class="grid gap-4 md:grid-cols-3">${activeC.map(c => `<div onclick="app.router('course-detail', ${c.id})" class="bg-white dark:bg-darkSurface p-4 rounded-xl border border-gray-200 dark:border-gray-800 cursor-pointer hover:border-primary transition-colors"><h4 class="font-bold dark:text-white mb-2">${c.title}</h4><div class="w-full bg-gray-100 dark:bg-gray-700 h-1 rounded"><div class="bg-primary h-1 rounded" style="width:${c.progress}%"></div></div></div>`).join('')}</div>
                `;
                new Sortable(document.getElementById('dash-tasks'), { animation: 150 });
                this.initChart(completedGoals, totalGoals);
            },
            
            initChart(completed, total) { 
                const ctx=document.getElementById('dashChart').getContext('2d'); 
                const remaining = total - completed;
                // Prevent 0/0 division visual glitch by defaulting to 100% gray if 0 total
                const data = total === 0 ? [0, 1] : [completed, remaining];
                
                new Chart(ctx,{
                    type:'doughnut',
                    data:{
                        datasets:[{
                            data: data,
                            backgroundColor:['#2eaadc','#E5E7EB'],
                            borderWidth:0
                        }]
                    },
                    options:{
                        responsive:true,
                        cutout:'80%',
                        plugins: { legend: { display: false }, tooltip: { enabled: false } }
                    }
                }); 
            }